window.onload = function(){
    var register_tips = `
                    背影<br/>
                    作者: 朱自清<br/>
　　我与父亲不相见已二年余了，我<br/>
最不能忘记的是他的背影。那年冬天，<br/>
祖母死了，父亲的差使也交卸了，正<br/>
是祸不单行的日子，我从北京到徐州，<br/>
打算跟着父亲奔丧回家。到徐州见着<br/>
父亲，看见满院狼藉的东西，又想起祖<br/>
母，不禁簌簌地流下眼泪。父亲说，<br/>
“事已如此，不必难过，好在天无绝人<br/>
之路！”回家变卖典质，父亲还了亏<br/>
空；又借钱办了丧事。这些日子，家中<br/>
光景很是惨淡，一半为了丧事，一半<br/>
为了父亲赋闲。丧事完毕，父亲要到南<br/>
京谋事，我也要回北京念书，我们便同行。<br/>
　　到南京时，有朋友约去游逛，勾<br/>
留了一日；第二日上午便须渡江到浦口<br/>
，下午上车北去。父亲因为事忙，本<br/>
已说定不送我，叫旅馆里一个熟识的茶<br/>
房陪我同去。他再三嘱咐茶房，甚是<br/>
仔细。但他终于不放心，怕茶房不妥帖<br/>
；颇踌躇了一会。其实我那年已二十<br/>
岁，北京已来往过两三次，是没有甚么<br/>
要紧的了。他踌躇了一会，终于决定<br/>
还是自己送我去。我两三回劝他不必去；<br/>
他只说，“不要紧，他们去不好！”<br/>
　　我们过了江，进了车站。我买票<br/>
，他忙着照看行李。行李太多了，得向<br/>
脚夫行些小费，才可过去。他便又忙<br/>
着和他们讲价钱。我那时真是聪明过分<br/>
，总觉他说话不大漂亮，非自己插嘴<br/>
不可。但他终于讲定了价钱；就送我上<br/>
车。他给我拣定了靠车门的一张椅子<br/>
；我将他给我做的紫毛大衣铺好坐位。<br/>
他嘱我路上小心，夜里警醒些，不要<br/>
受凉。又嘱托茶房好好照应我。我心里<br/>
暗笑他的迂；他们只认得钱，托他们<br/>
直是白托！而且我这样大年纪的人，难<br/>
道还不能料理自己么？唉，我现在想<br/>
想，那时真是太聪明了！<br/>
　　我说道，“爸爸，你走吧。”他<br/>
望车外看了看，说，“我买几个橘子去<br/>
。你就在此地，不要走动。”我看那<br/>
边月台的栅栏外有几个卖东西的等着顾<br/>
客。走到那边月台，须穿过铁道，须跳<br/>
下去又爬上去。父亲是一个胖子，走<br/>
过去自然要费事些。我本来要去的，<br/>
他不肯，只好让他去。我看见他戴着黑<br/><br/>
布小帽，穿着黑布大马褂，深青布棉<br/>
袍，蹒跚地走到铁道边，慢慢探身下去<br/>
，尚不大难。可是他穿过铁道，要爬<br/>
上那边月台，就不容易了。他用两手<br/>
攀着<br/>
上面，两脚再向上缩；他肥胖的身子<br/>
向左微倾，显出努力的样子。这时我看<br/>
见他的背影，我的泪很快地流下来了。<br/>
我赶紧拭干了泪，怕他看见，也怕别<br/>
人看见。我再向外看时，他已抱了朱红<br/>
的橘子望回走了。过铁道时，他先将<br/>
橘子散放在地上，自己慢慢爬下，再抱<br/>
起橘子走。到这边时，我赶紧去搀他。<br/>
他和我走到车上，将橘子一股脑儿放在<br/>
我的皮大衣上。于是扑扑衣上的泥土<br/>
，心里很轻松似的，过一会说，“我<br/>
走了；到那边来信！”我望着他走出去。<br/>
他走了几步，回过头看见我，说，“<br/>
进去吧，里边没人。”等他的背影混入<br/>
来来往往的人里，再找不着了，我便<br/>
进来坐下，我的眼泪又来了。<br/>
　　近几年来，父亲和我都是东奔西<br/>
走，家中光景是一日不如一日。他少年<br/>
出外谋生，独力支持，做了许多大事<br/>
。那知老境却如此颓唐！他触目伤怀，<br/>
自然情不能自已。情郁于中，自然要<br/>
发之于外；家庭琐屑便往往触他之怒。<br/>
他待我渐渐不同往日。但最近两年的<br/>
不见，他终于忘却我的不好，只是惦记着我<br/>
，惦记着我的儿子。我北来后，他写<br/>
了一信给我，信中说道，“我身体平安<br/>
，惟膀子疼痛利害，举箸提笔，诸多<br/>
不便，大约大去之期不远矣。”我读到此处<br/>
，在晶莹的泪光中，又看见那肥胖的<br/>
，青布棉袍，黑布马褂的背影。唉！我<br/>
不知何时再能与他相见！<br/>
    `



    var txt = `
        <h1>注意事项！</h1>
        <br/>
        1.昵称不能超过6个字符，或少于2个字符<br/><br/>
        2.用户名不能超过6个字符，或少于2个字符，并且不能以特殊字符及数字作开头<br /><br/>
        3.密码不能超过6个字符，或少于2个字符<br/><br/>
        4.请不要尝试在表单中输入javascript或sql代码<br/><br/>
        5.不要输入空格，输入了也没用，我们一律不认<br/><br/>
        6.入群须知：<br/><br/>
    《将进酒》<br/><br/><br/>
君不见，黄河之水天上来，奔流到海不复回。<br/>
君不见，高堂明镜悲白发，朝如青丝暮成雪。<br/>
人生得意须尽欢，莫使金樽空对月。<br/>
天生我材必有用，千金散尽还复来。<br/>
烹羊宰牛且为乐，会须一饮三百杯。<br/>
岑夫子，丹丘生，将进酒，杯莫停。<br/>
与君歌一曲，请君为我倾耳听。<br/>
钟鼓馔玉不足贵，但愿长醉不复醒。<br/>
古来圣贤皆寂寞，惟有饮者留其名。<br/>
陈王昔时宴平乐，斗酒十千恣欢谑。<br/>
主人何为言少钱，径须沽取对君酌。<br/>
五花马⒂，千金裘，呼儿将出换美酒，与尔同销万古愁<br/>
<br/> 
<h2> : )</h2>
    `
    typing({
        "Tipstext":txt,
        "ContainerId":"tips",
        "speed":100,
        "wordSpeed":1
    })
    var divTips = document.getElementById("tips")


    divTips.onscroll = function(){
        if(divTips.scrollTop + divTips.clientHeight != divTips.scrollHeight){
            document.getElementById("tipsBool").setAttribute("disabled","disabled")
        }else{
            document.getElementById("tipsBool").removeAttribute("disabled")
            // 用户是否同意协议

        }
    }

    document.getElementById("tipsBool").onclick = function(){
        document.getElementById("tipsBool").checked?document.getElementById("register").removeAttribute("disabled"):document.getElementById("register").setAttribute("disabled","disabled")
    }




    DragBox({
        "width":500,
        "height":500,
        "title":"欢迎注册",
        "id":"registerBox",
        "showBox":"register_box"
    });

    var b = register_ifyInput()
    var user = document.getElementById("user");
    var username = document.getElementById("username");
    var password = document.getElementById("password");
    var repassword = document.getElementById("repassword")
    var e_mail = document.getElementById("e_mail");
    var phonenumber = document.getElementById("phonenumber");
    var bool = false;
    user.onchange = function(){
        bool = b.ifyName()
    }
    username.onchange = function(){
        bool = b.ifyUser()
    }
    password.onchange = function(){
        bool = b.ifyPasswrod()
    }
    repassword.onchange = function(){
        bool =  b.ifyRepassword()
    }
    e_mail.onchange = function(){
        bool =  b.ifyEmail()
    }
    phonenumber.onchange = function(){
        bool =  b.ifyPhonenum()
    }



    document.getElementById("register").onclick = function(){
                if(bool){
                    // 为后台准备的数据
                    var data = {
                        "user":user.value,
                        "username":username.value,
                        "password":password.value,
                        "e_mail":e_mail.value,
                        "phonenumber":phonenumber.value
                    }
                    $.ajax({
                        type: "post",
                        url: "http://localhost:3000/users",
                        data:data,
                        dataType:"json",
                        async:false,
                        success: function (data) {
                            alert('注册成功！');
                        },
                        error: function (msg) {
                            alert(msg);
                        }
                    });

                    location.href = "login.html"
                }else{
                    alert("表单项不能为空！")
                }
            }

}